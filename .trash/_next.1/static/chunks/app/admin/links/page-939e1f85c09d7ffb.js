(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16],{1886:function(e,n,t){Promise.resolve().then(t.bind(t,9727))},9727:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return u}});var l=t(7573),a=t(7653),i=t(8428),r=t(7656),s=t(5662);let o=[{value:"primary",label:"Primary navigation"},{value:"secondary",label:"Secondary navigation"},{value:"social",label:"Social links"}],c=[{value:"",label:"Auto-detect from URL"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"tiktok",label:"TikTok"},{value:"youtube",label:"YouTube"},{value:"whatsapp",label:"WhatsApp"}];function d(){return{id:null,label:"",url:"",category:"primary",order:0,is_active:!0,icon:""}}function u(){let{data:e,error:n,isLoading:t,mutate:u}=(0,i.ZP)("/links",()=>(0,r.R1)("/links")),h=(0,a.useMemo)(()=>{var n;return null!==(n=null==e?void 0:e.links)&&void 0!==n?n:[]},[e]),[m,g]=(0,a.useState)(!1),[v,b]=(0,a.useState)(()=>d()),[p,f]=(0,a.useState)(""),[y,x]=(0,a.useState)(!1),[j,k]=(0,a.useState)(!1);function N(){g(!1),x(!1),f("")}function w(e,n){b(t=>{let l={...t,[e]:n};return"category"===e&&"social"!==n&&(l.icon=""),l})}async function S(e){var n;e.preventDefault(),x(!0),f("");let t={id:null!==(n=v.id)&&void 0!==n?n:void 0,label:v.label,url:v.url,category:v.category,order:Number(v.order)||0,is_active:!!v.is_active,icon:"social"===v.category&&v.icon||null};try{await (0,r.sg)("/links",t),await u(),N()}catch(e){f(e.message||"Failed to save link")}finally{x(!1)}}async function C(e){if(window.confirm('Delete link "'.concat(e.label,'"?')))try{await (0,r.QW)("/links/".concat(e.id)),await u()}catch(e){alert(e.message||"Failed to delete link")}}async function _(e,n){let t=(0,s.HN)(h.filter(n=>n.category===e.category)),l=t.findIndex(n=>n.id===e.id),a="up"===n?l-1:l+1;if(a<0||a>=t.length)return;let i=[...t],[o]=i.splice(l,1);i.splice(a,0,o),k(!0);try{await Promise.all(i.map((e,n)=>(0,r.sg)("/links",{...e,order:n}))),await u()}catch(e){alert(e.message||"Failed to update order")}finally{k(!1)}}return(0,l.jsxs)("section",{children:[(0,l.jsxs)("header",{className:"action-bar",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{style:{margin:0},children:"Navigation & Links"}),(0,l.jsx)("p",{style:{margin:0,color:"#555"},children:"Organise menu items and social links. Use the arrow buttons to reorder items within their group."})]}),(0,l.jsx)("button",{className:"button",onClick:function(){b(d()),f(""),g(!0)},children:"New link"})]}),n?(0,l.jsx)("div",{className:"alert",children:n.message}):null,t?(0,l.jsx)("p",{children:"Loading links…"}):0===h.length?(0,l.jsx)("div",{className:"empty-state",children:"No links yet. Add your first navigation item."}):(0,l.jsx)("div",{className:"stack",children:o.map(e=>{let n=(0,s.HN)(h.filter(n=>n.category===e.value));return(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("header",{className:"action-bar",style:{marginBottom:"0.5rem"},children:(0,l.jsx)("h2",{style:{margin:0},children:e.label})}),0===n.length?(0,l.jsx)("p",{style:{margin:0,color:"#666"},children:"No links in this group."}):(0,l.jsx)("div",{className:"stack",children:n.map(e=>(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"center",border:"1px solid #eee",borderRadius:"0.5rem",padding:"0.75rem 1rem",background:"#fff"},children:[(0,l.jsxs)("div",{className:"stack",children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,l.jsx)("strong",{children:e.label}),(0,l.jsx)("span",{className:"badge",style:{background:e.is_active?"#dcfce7":"#fee2e2",color:e.is_active?"#166534":"#7f1d1d"},children:e.is_active?"Active":"Hidden"})]}),(0,l.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.url}),"social"===e.category?(0,l.jsxs)("span",{style:{fontSize:"0.8rem",color:"#555"},children:["Icon: ",e.icon?e.icon:"Auto"]}):null]}),(0,l.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,l.jsx)("button",{className:"button secondary",onClick:()=>_(e,"up"),disabled:j,children:"↑"}),(0,l.jsx)("button",{className:"button secondary",onClick:()=>_(e,"down"),disabled:j,children:"↓"}),(0,l.jsx)("button",{className:"button secondary",onClick:()=>{var n;b({...e,icon:null!==(n=e.icon)&&void 0!==n?n:""}),f(""),g(!0)},children:"Edit"}),(0,l.jsx)("button",{className:"button",onClick:()=>C(e),children:"Delete"})]})]},e.id))})]},e.value)})}),m?(0,l.jsx)("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:(0,l.jsxs)("div",{className:"modal",children:[(0,l.jsxs)("header",{className:"stack",style:{marginBottom:"1rem"},children:[(0,l.jsx)("h2",{style:{margin:0},children:v.id?"Edit link":"Add link"}),(0,l.jsx)("p",{style:{margin:0,color:"#555"},children:"Choose the destination, placement, and visibility for this navigation item."})]}),p?(0,l.jsx)("div",{className:"alert",children:p}):null,(0,l.jsxs)("form",{className:"stack",onSubmit:S,children:[(0,l.jsxs)("div",{className:"form-grid two-col",children:[(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"link-label",children:"Label"}),(0,l.jsx)("input",{id:"link-label",type:"text",required:!0,value:v.label,onChange:e=>w("label",e.target.value)})]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"link-url",children:"URL"}),(0,l.jsx)("input",{id:"link-url",type:"url",required:!0,value:v.url,onChange:e=>w("url",e.target.value)})]})]}),(0,l.jsxs)("div",{className:"form-grid two-col",children:[(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"link-category",children:"Category"}),(0,l.jsx)("select",{id:"link-category",value:v.category,onChange:e=>w("category",e.target.value),children:o.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"link-order",children:"Order"}),(0,l.jsx)("input",{id:"link-order",type:"number",min:"0",value:v.order,onChange:e=>w("order",Number(e.target.value))})]})]}),"social"===v.category?(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"link-icon",children:"Icon"}),(0,l.jsx)("select",{id:"link-icon",value:v.icon||"",onChange:e=>w("icon",e.target.value),children:c.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value||"auto"))}),(0,l.jsx)("span",{style:{fontSize:"0.8rem",color:"#555"},children:"This icon is shown for the link on the public site."})]}):null,(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,l.jsx)("input",{type:"checkbox",checked:v.is_active,onChange:e=>w("is_active",e.target.checked)}),(0,l.jsx)("span",{children:"Visible"})]}),(0,l.jsxs)("div",{className:"actions",children:[(0,l.jsx)("button",{type:"button",className:"button secondary",onClick:N,disabled:y,children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"button",disabled:y,children:y?"Saving…":"Save link"})]})]})]})}):null]})}},7656:function(e,n,t){"use strict";async function l(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat("http://127.0.0.1:3001/api").concat(e),l="undefined"!=typeof FormData&&n.body instanceof FormData?{...n.headers||{}}:{"Content-Type":"application/json",...n.headers||{}},a=await fetch(t,{...n,headers:l});if(!a.ok){let e=a.statusText;try{let n=await a.json();e=(null==n?void 0:n.message)||e}catch(e){}throw Error(e||"Request failed")}return 204===a.status?null:await a.json()}function a(e){return l(e,{method:"GET"})}function i(e,n){return l(e,{method:"POST",body:JSON.stringify(n)})}function r(e,n){return l(e,{method:"POST",body:n})}function s(e){return l(e,{method:"DELETE"})}t.d(n,{QW:function(){return s},R1:function(){return a},sg:function(){return i},zi:function(){return r}})},5662:function(e,n,t){"use strict";function l(e){if(!e)return"";let n=new Date(new Date(e).toLocaleString("en-US",{timeZone:"Asia/Jakarta",hour12:!1})),t=e=>String(e).padStart(2,"0"),l=n.getFullYear(),a=t(n.getMonth()+1),i=t(n.getDate()),r=t(n.getHours()),s=t(n.getMinutes());return"".concat(l,"-").concat(a,"-").concat(i,"T").concat(r,":").concat(s)}function a(e){if(!e)return null;let[n,t]=e.split("T"),l=5===t.length?"".concat(t,":00"):t;return new Date("".concat(n,"T").concat(l,"+07:00")).toISOString()}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...e].sort((e,n)=>{var t,l;return(null!==(t=e.order)&&void 0!==t?t:0)-(null!==(l=n.order)&&void 0!==l?l:0)})}t.d(n,{HN:function(){return i},Iu:function(){return a},Nl:function(){return l}})}},function(e){e.O(0,[428,293,286,744],function(){return e(e.s=1886)}),_N_E=e.O()}]);