(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{3514:function(e,t,a){Promise.resolve().then(a.bind(a,5206))},5206:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var l=a(7573),s=a(7653),n=a(8428),i=a(3978),r=a(7118),o=a(7656),d=a(5662);function c(){return{title:"",slug:"",summary:"",description:"",location:"",starts_at:(0,d.Nl)(new Date().toISOString()),ends_at:"",hero_image_url:"",is_published:!1}}function u(){let{data:e,error:t,isLoading:a,mutate:u}=(0,n.ZP)("/events",()=>(0,o.R1)("/events")),h=(0,s.useMemo)(()=>{var t;return null!==(t=null==e?void 0:e.events)&&void 0!==t?t:[]},[e]),[m,p]=(0,s.useState)(!1),[g,x]=(0,s.useState)(""),[v,f]=(0,s.useState)(!1),[b,j]=(0,s.useState)(()=>c()),[y,_]=(0,s.useState)(null),[N,k]=(0,s.useState)(!1),w=(0,s.useId)(),C="".concat(w,"-help");function S(){p(!1),f(!1),x("")}function D(e,t){j(a=>({...a,[e]:t}))}async function T(e){var t;e.preventDefault(),f(!0),x("");let a={id:null!=y?y:void 0,title:b.title,slug:b.slug,summary:b.summary||null,description:b.description||null,location:b.location||null,hero_image_url:b.hero_image_url||null,is_published:b.is_published,starts_at:null!==(t=(0,d.Iu)(b.starts_at))&&void 0!==t?t:new Date().toISOString(),ends_at:b.ends_at?(0,d.Iu)(b.ends_at):null};try{await (0,o.sg)("/events",a),await u(),S()}catch(e){x(e.message||"Failed to save event")}finally{f(!1)}}async function E(e){try{var t,a,l,s;await (0,o.sg)("/events",{...e,summary:null!==(t=e.summary)&&void 0!==t?t:null,description:null!==(a=e.description)&&void 0!==a?a:null,location:null!==(l=e.location)&&void 0!==l?l:null,hero_image_url:null!==(s=e.hero_image_url)&&void 0!==s?s:null,starts_at:e.starts_at,ends_at:e.ends_at,is_published:!e.is_published}),await u()}catch(e){alert(e.message||"Failed to update publish status")}}return(0,l.jsxs)("section",{children:[(0,l.jsxs)("header",{className:"action-bar",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{style:{margin:0},children:"Events"}),(0,l.jsx)("p",{style:{margin:0,color:"#555"},children:"Manage upcoming events. Toggle publish status to control visibility on the site."})]}),(0,l.jsx)("button",{className:"button",onClick:function(){j(c()),_(null),x(""),p(!0)},children:"New event"})]}),t?(0,l.jsx)("div",{className:"alert",children:t.message}):null,a?(0,l.jsx)("p",{children:"Loading events…"}):0===h.length?(0,l.jsx)("div",{className:"empty-state",children:"No events yet. Create your first event."}):(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Title"}),(0,l.jsx)("th",{children:"Starts"}),(0,l.jsx)("th",{children:"Ends"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:h.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"stack",children:[(0,l.jsx)("strong",{children:e.title}),(0,l.jsx)("span",{style:{color:"#666",fontSize:"0.875rem"},children:e.slug})]})}),(0,l.jsx)("td",{children:new Date(e.starts_at).toLocaleString("en-US",{timeZone:"Asia/Jakarta"})}),(0,l.jsx)("td",{children:e.ends_at?new Date(e.ends_at).toLocaleString("en-US",{timeZone:"Asia/Jakarta"}):"—"}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"badge",style:{background:e.is_published?"#dcfce7":"#fee2e2",color:e.is_published?"#166534":"#7f1d1d"},children:e.is_published?"Published":"Draft"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,l.jsx)("button",{className:"button secondary",onClick:()=>{var t,a,l,s;j({...e,summary:null!==(t=e.summary)&&void 0!==t?t:"",description:null!==(a=e.description)&&void 0!==a?a:"",location:null!==(l=e.location)&&void 0!==l?l:"",hero_image_url:null!==(s=e.hero_image_url)&&void 0!==s?s:"",starts_at:(0,d.Nl)(e.starts_at),ends_at:(0,d.Nl)(e.ends_at)}),_(e.id),x(""),p(!0)},children:"Edit"}),(0,l.jsx)("button",{className:"button",onClick:()=>E(e),children:e.is_published?"Unpublish":"Publish"})]})})]},e.id))})]}),m?(0,l.jsx)("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:(0,l.jsxs)("div",{className:"modal",children:[(0,l.jsxs)("header",{className:"stack",style:{marginBottom:"1rem"},children:[(0,l.jsx)("h2",{style:{margin:0},children:y?"Edit event":"Create event"}),(0,l.jsx)("p",{style:{margin:0,color:"#555"},children:"Fill in the event details. Times are saved in Jakarta time (UTC+7)."})]}),g?(0,l.jsx)("div",{className:"alert",children:g}):null,(0,l.jsxs)("form",{className:"form-grid",onSubmit:T,children:[(0,l.jsxs)("div",{className:"form-grid two-col",children:[(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"title",children:"Title"}),(0,l.jsx)("input",{id:"title",type:"text",required:!0,value:b.title,onChange:e=>D("title",e.target.value)})]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"slug",children:"Slug"}),(0,l.jsx)("input",{id:"slug",type:"text",required:!0,value:b.slug,onChange:e=>D("slug",e.target.value)})]})]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"summary",children:"Summary"}),(0,l.jsx)("textarea",{id:"summary",rows:2,value:b.summary,onChange:e=>D("summary",e.target.value)})]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"description",children:"Description"}),(0,l.jsx)("textarea",{id:"description",rows:4,value:b.description,onChange:e=>D("description",e.target.value)})]}),(0,l.jsxs)("div",{className:"form-grid two-col",children:[(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"location",children:"Location"}),(0,l.jsx)("input",{id:"location",type:"text",value:b.location,onChange:e=>D("location",e.target.value)})]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{id:w,htmlFor:"hero",children:"Hero image"}),(0,l.jsx)(r.C,{value:b.hero_image_url,onChange:e=>D("hero_image_url",e),uploadType:"events",ariaLabelledBy:w,ariaDescribedBy:C,disabled:v,helperText:"Upload the featured image for this event."}),(0,l.jsx)("span",{id:C,style:{fontSize:"0.8rem",color:"#555"},children:"Prefer an external resource? Paste its link below or reuse an item from the media library."}),(0,l.jsxs)("div",{className:"stack",style:{gap:"0.5rem"},children:[(0,l.jsx)("input",{id:"hero",type:"text",placeholder:"https://example.com/image.jpg or /uploads/example.jpg",value:b.hero_image_url,onChange:e=>D("hero_image_url",e.target.value)}),(0,l.jsxs)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(0,l.jsx)("button",{type:"button",className:"button secondary",onClick:()=>k(!0),children:"Choose from media library"}),b.hero_image_url?(0,l.jsx)("button",{type:"button",className:"button secondary",onClick:()=>D("hero_image_url",""),children:"Remove image"}):null]}),b.hero_image_url?(0,l.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",overflow:"hidden",width:"100%",maxWidth:"320px"},children:(0,l.jsx)("img",{src:b.hero_image_url,alt:"Selected hero",style:{width:"100%",display:"block",objectFit:"cover"}})}):null]})]})]}),(0,l.jsxs)("div",{className:"form-grid two-col",children:[(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"starts_at",children:"Starts at"}),(0,l.jsx)("input",{id:"starts_at",type:"datetime-local",required:!0,value:b.starts_at,onChange:e=>D("starts_at",e.target.value)})]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"ends_at",children:"Ends at"}),(0,l.jsx)("input",{id:"ends_at",type:"datetime-local",value:b.ends_at,onChange:e=>D("ends_at",e.target.value)})]})]}),(0,l.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,l.jsx)("input",{type:"checkbox",checked:b.is_published,onChange:e=>D("is_published",e.target.checked)}),(0,l.jsx)("span",{children:"Published"})]}),(0,l.jsxs)("div",{className:"actions",children:[(0,l.jsx)("button",{type:"button",className:"button secondary",onClick:S,disabled:v,children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"button",disabled:v,children:v?"Saving…":"Save event"})]})]})]})}):null,(0,l.jsx)(i.R,{open:N,onClose:()=>k(!1),onSelect:function(e){e&&(D("hero_image_url",e.asset_url||""),k(!1))}})]})}},7118:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var l=a(7573),s=a(7653),n=a(7656);function i(e){let{value:t,onChange:a,uploadType:i="media",disabled:r=!1,helperText:o="We'll host this image and return a reusable link.",ariaLabelledBy:d,ariaDescribedBy:c}=e,[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(""),[g,x]=(0,s.useState)(!1),v=(0,s.useRef)(null),f=(0,s.useCallback)(()=>{v.current&&(v.current.value="")},[]),b=(0,s.useCallback)(async e=>{if(e&&!r&&!u){h(!0),p("");try{let t=new FormData;t.append("file",e),t.append("type",i);let l=await (0,n.zi)("/media/upload",t);a(l.url)}catch(e){p(e.message||"Failed to upload image")}finally{h(!1),x(!1),f()}}},[r,a,f,i,u]),j=(0,s.useCallback)(e=>{var t,a;if(e.preventDefault(),e.stopPropagation(),r||u)return;x(!1);let l=null===(a=e.dataTransfer)||void 0===a?void 0:null===(t=a.files)||void 0===t?void 0:t[0];l&&b(l)},[r,b,u]),y=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),r||u||x(!0)},[r,u]),_=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),x(!1)},[]),N=(0,s.useCallback)(()=>{var e;r||u||null===(e=v.current)||void 0===e||e.click()},[r,u]),k=(0,s.useCallback)(e=>{let[t]=e.target.files||[];t&&b(t)},[b]);return(0,l.jsxs)("div",{className:"stack",style:{gap:"0.5rem"},children:[(0,l.jsxs)("div",{role:"button",tabIndex:0,onClick:N,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),N())},onDragEnter:y,onDragOver:y,onDragLeave:_,onDrop:j,"aria-disabled":r||u,"aria-busy":u,"aria-labelledby":d,"aria-describedby":c,style:{border:"2px dashed",borderColor:g?"#1f6feb":"#d0d7de",borderRadius:"0.75rem",padding:"1.25rem",textAlign:"center",background:g?"#f0f6ff":"#f9fafb",cursor:r||u?"not-allowed":"pointer",opacity:r?.6:1,outline:"none",transition:"all 0.2s ease-in-out"},children:[(0,l.jsx)("input",{ref:v,type:"file",accept:"image/*",style:{display:"none"},onChange:k,disabled:r||u}),(0,l.jsxs)("div",{className:"stack",style:{gap:"0.25rem",alignItems:"center"},children:[(0,l.jsx)("strong",{children:u?"Uploading…":"Drag and drop or click to upload an image"}),(0,l.jsx)("span",{style:{fontSize:"0.85rem",color:"#555"},children:o}),t?(0,l.jsxs)("span",{style:{fontSize:"0.85rem",color:"#1f6feb",wordBreak:"break-word"},children:["Current URL: ",t]}):null]})]}),m?(0,l.jsx)("div",{className:"alert",children:m}):null]})}},3978:function(e,t,a){"use strict";a.d(t,{R:function(){return d}});var l=a(7573),s=a(7653),n=a(8428),i=a(7656);let r=[{value:"testimonial",label:"Testimonials"},{value:"partner",label:"Partners"},{value:"gallery",label:"Gallery"}];function o(e){let{type:t,onSelect:a}=e,{data:r,error:o,isLoading:d}=(0,n.ZP)("/media/".concat(t),()=>(0,i.R1)("/media/".concat(t))),c=(0,s.useMemo)(()=>{var e;return null!==(e=null==r?void 0:r.items)&&void 0!==e?e:[]},[r]);return o?(0,l.jsx)("div",{className:"alert",children:o.message}):d?(0,l.jsx)("p",{children:"Loading media…"}):0===c.length?(0,l.jsx)("div",{className:"empty-state",children:"No media in this group yet."}):(0,l.jsx)("div",{className:"stack",children:c.map(e=>(0,l.jsxs)("button",{type:"button",className:"card",style:{textAlign:"left",display:"grid",gridTemplateColumns:"96px 1fr auto",gap:"1rem",alignItems:"center"},onClick:()=>a(e),children:[(0,l.jsx)("div",{style:{width:"96px",height:"96px",borderRadius:"0.75rem",overflow:"hidden",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb"},children:e.asset_url?(0,l.jsx)("img",{src:e.asset_url,alt:e.title||"Media asset",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,l.jsx)("span",{style:{color:"#555"},children:"No preview"})}),(0,l.jsxs)("div",{className:"stack",style:{gap:"0.35rem"},children:[(0,l.jsx)("strong",{children:e.title||"Untitled asset"}),e.description?(0,l.jsx)("span",{style:{color:"#555"},children:e.description}):null,(0,l.jsx)("span",{style:{fontSize:"0.85rem",color:"#1f6feb",wordBreak:"break-all"},children:e.asset_url})]}),(0,l.jsx)("span",{className:"badge",style:{justifySelf:"flex-start"},children:"Select"})]},e.id))})}function d(e){var t,a;let{open:n,onClose:i,onSelect:d}=e,[c,u]=(0,s.useState)(null!==(a=null===(t=r[0])||void 0===t?void 0:t.value)&&void 0!==a?a:"testimonial");return((0,s.useEffect)(()=>{if(!n)return;let e=e=>{"Escape"===e.key&&i()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,i]),n)?(0,l.jsx)("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:(0,l.jsxs)("div",{className:"modal",style:{maxWidth:"720px"},children:[(0,l.jsxs)("header",{className:"stack",style:{marginBottom:"1rem"},children:[(0,l.jsx)("h2",{style:{margin:0},children:"Choose media"}),(0,l.jsx)("p",{style:{margin:0,color:"#555"},children:"Pick an image from the media library. You can manage assets from the Media section of the admin panel."})]}),(0,l.jsx)("div",{className:"tabs",role:"tablist",style:{marginBottom:"1rem"},children:r.map(e=>(0,l.jsx)("button",{type:"button",role:"tab","aria-selected":c===e.value,className:"tab ".concat(c===e.value?"active":""),onClick:()=>u(e.value),children:e.label},e.value))}),(0,l.jsx)("div",{style:{maxHeight:"420px",overflowY:"auto",paddingRight:"0.5rem"},children:(0,l.jsx)(o,{type:c,onSelect:e=>d(e)})}),(0,l.jsx)("footer",{style:{marginTop:"1rem",display:"flex",justifyContent:"flex-end"},children:(0,l.jsx)("button",{type:"button",className:"button secondary",onClick:i,children:"Close"})})]})}):null}},7656:function(e,t,a){"use strict";async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat("http://127.0.0.1:3001/api").concat(e),l="undefined"!=typeof FormData&&t.body instanceof FormData?{...t.headers||{}}:{"Content-Type":"application/json",...t.headers||{}},s=await fetch(a,{...t,headers:l});if(!s.ok){let e=s.statusText;try{let t=await s.json();e=(null==t?void 0:t.message)||e}catch(e){}throw Error(e||"Request failed")}return 204===s.status?null:await s.json()}function s(e){return l(e,{method:"GET"})}function n(e,t){return l(e,{method:"POST",body:JSON.stringify(t)})}function i(e,t){return l(e,{method:"POST",body:t})}function r(e){return l(e,{method:"DELETE"})}a.d(t,{QW:function(){return r},R1:function(){return s},sg:function(){return n},zi:function(){return i}})},5662:function(e,t,a){"use strict";function l(e){if(!e)return"";let t=new Date(new Date(e).toLocaleString("en-US",{timeZone:"Asia/Jakarta",hour12:!1})),a=e=>String(e).padStart(2,"0"),l=t.getFullYear(),s=a(t.getMonth()+1),n=a(t.getDate()),i=a(t.getHours()),r=a(t.getMinutes());return"".concat(l,"-").concat(s,"-").concat(n,"T").concat(i,":").concat(r)}function s(e){if(!e)return null;let[t,a]=e.split("T"),l=5===a.length?"".concat(a,":00"):a;return new Date("".concat(t,"T").concat(l,"+07:00")).toISOString()}function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...e].sort((e,t)=>{var a,l;return(null!==(a=e.order)&&void 0!==a?a:0)-(null!==(l=t.order)&&void 0!==l?l:0)})}a.d(t,{HN:function(){return n},Iu:function(){return s},Nl:function(){return l}})}},function(e){e.O(0,[428,293,286,744],function(){return e(e.s=3514)}),_N_E=e.O()}]);