(()=>{var e={};e.id=16,e.ids=[16],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},986:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>r.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),a(3818),a(9115),a(3358),a(7824);var n=a(3282),i=a(5736),s=a(3906),r=a.n(s),l=a(6880),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["admin",{children:["links",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3818)),"C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\admin\\links\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9115)),"C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\admin\\layout.js"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,3358)),"C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7824,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\admin\\links\\page.js"],u="/admin/links/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/links/page",pathname:"/admin/links",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5786:(e,t,a)=>{Promise.resolve().then(a.bind(a,2802))},9081:(e,t,a)=>{Promise.resolve().then(a.bind(a,5657))},8412:()=>{},4090:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,4424,23)),Promise.resolve().then(a.t.bind(a,7752,23)),Promise.resolve().then(a.t.bind(a,5275,23)),Promise.resolve().then(a.t.bind(a,9842,23)),Promise.resolve().then(a.t.bind(a,1633,23)),Promise.resolve().then(a.t.bind(a,9224,23))},2802:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(3227),i=a(649),s=a(1043),r=a(3677),l=a(4707);let o=[{href:"/admin/posts",label:"Posts"},{href:"/admin/events",label:"Events"},{href:"/admin/media",label:"Media"},{href:"/admin/contacts",label:"Contacts"},{href:"/admin/links",label:"Links"},{href:"/admin/messages",label:"Messages"}];function c({children:e}){let t=(0,s.usePathname)(),a=(0,s.useRouter)(),[c,d]=(0,r.useState)(!1);return c?(0,n.jsxs)("div",{children:[n.jsx("nav",{className:"admin-nav",children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("ul",{children:o.map(e=>{let a=t?.startsWith(e.href);return n.jsx("li",{children:n.jsx(i.default,{href:e.href,className:a?"active":void 0,children:e.label})},e.href)})}),n.jsx("div",{style:{paddingRight:"1.5rem"},children:n.jsx("button",{className:"button secondary",onClick:function(){(0,l.Ov)(),a.replace("/login")},children:"Sign out"})})]})}),n.jsx("main",{children:e})]}):null}},5657:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(3227),i=a(3677),s=a(3083),r=a(4985),l=a(5449);let o=[{value:"primary",label:"Primary navigation"},{value:"secondary",label:"Secondary navigation"},{value:"social",label:"Social links"}],c=[{value:"",label:"Auto-detect from URL"},{value:"instagram",label:"Instagram"},{value:"facebook",label:"Facebook"},{value:"tiktok",label:"TikTok"},{value:"youtube",label:"YouTube"},{value:"whatsapp",label:"WhatsApp"}];function d(){return{id:null,label:"",url:"",category:"primary",order:0,is_active:!0,icon:""}}function u(){let{data:e,error:t,isLoading:a,mutate:u}=(0,s.ZP)("/links",()=>(0,r.R1)("/links")),m=(0,i.useMemo)(()=>e?.links??[],[e]),[h,p]=(0,i.useState)(!1),[g,b]=(0,i.useState)(()=>d()),[v,x]=(0,i.useState)(""),[f,y]=(0,i.useState)(!1),[j,k]=(0,i.useState)(!1);function w(){p(!1),y(!1),x("")}function N(e,t){b(a=>{let n={...a,[e]:t};return"category"===e&&"social"!==t&&(n.icon=""),n})}async function P(e){e.preventDefault(),y(!0),x("");let t={id:g.id??void 0,label:g.label,url:g.url,category:g.category,order:Number(g.order)||0,is_active:!!g.is_active,icon:"social"===g.category&&g.icon||null};try{await (0,r.sg)("/links",t),await u(),w()}catch(e){x(e.message||"Failed to save link")}finally{y(!1)}}async function C(e){if(window.confirm(`Delete link "${e.label}"?`))try{await (0,r.QW)(`/links/${e.id}`),await u()}catch(e){alert(e.message||"Failed to delete link")}}async function _(e,t){let a=(0,l.HN)(m.filter(t=>t.category===e.category)),n=a.findIndex(t=>t.id===e.id),i="up"===t?n-1:n+1;if(i<0||i>=a.length)return;let s=[...a],[o]=s.splice(n,1);s.splice(i,0,o),k(!0);try{await Promise.all(s.map((e,t)=>(0,r.sg)("/links",{...e,order:t}))),await u()}catch(e){alert(e.message||"Failed to update order")}finally{k(!1)}}return(0,n.jsxs)("section",{children:[(0,n.jsxs)("header",{className:"action-bar",children:[(0,n.jsxs)("div",{children:[n.jsx("h1",{style:{margin:0},children:"Navigation & Links"}),n.jsx("p",{style:{margin:0,color:"#555"},children:"Organise menu items and social links. Use the arrow buttons to reorder items within their group."})]}),n.jsx("button",{className:"button",onClick:function(){b(d()),x(""),p(!0)},children:"New link"})]}),t?n.jsx("div",{className:"alert",children:t.message}):null,a?n.jsx("p",{children:"Loading links…"}):0===m.length?n.jsx("div",{className:"empty-state",children:"No links yet. Add your first navigation item."}):n.jsx("div",{className:"stack",children:o.map(e=>{let t=(0,l.HN)(m.filter(t=>t.category===e.value));return(0,n.jsxs)("div",{className:"card",children:[n.jsx("header",{className:"action-bar",style:{marginBottom:"0.5rem"},children:n.jsx("h2",{style:{margin:0},children:e.label})}),0===t.length?n.jsx("p",{style:{margin:0,color:"#666"},children:"No links in this group."}):n.jsx("div",{className:"stack",children:t.map(e=>(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"center",border:"1px solid #eee",borderRadius:"0.5rem",padding:"0.75rem 1rem",background:"#fff"},children:[(0,n.jsxs)("div",{className:"stack",children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("strong",{children:e.label}),n.jsx("span",{className:"badge",style:{background:e.is_active?"#dcfce7":"#fee2e2",color:e.is_active?"#166534":"#7f1d1d"},children:e.is_active?"Active":"Hidden"})]}),n.jsx("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.url}),"social"===e.category?(0,n.jsxs)("span",{style:{fontSize:"0.8rem",color:"#555"},children:["Icon: ",e.icon?e.icon:"Auto"]}):null]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[n.jsx("button",{className:"button secondary",onClick:()=>_(e,"up"),disabled:j,children:"↑"}),n.jsx("button",{className:"button secondary",onClick:()=>_(e,"down"),disabled:j,children:"↓"}),n.jsx("button",{className:"button secondary",onClick:()=>{b({...e,icon:e.icon??""}),x(""),p(!0)},children:"Edit"}),n.jsx("button",{className:"button",onClick:()=>C(e),children:"Delete"})]})]},e.id))})]},e.value)})}),h?n.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:(0,n.jsxs)("div",{className:"modal",children:[(0,n.jsxs)("header",{className:"stack",style:{marginBottom:"1rem"},children:[n.jsx("h2",{style:{margin:0},children:g.id?"Edit link":"Add link"}),n.jsx("p",{style:{margin:0,color:"#555"},children:"Choose the destination, placement, and visibility for this navigation item."})]}),v?n.jsx("div",{className:"alert",children:v}):null,(0,n.jsxs)("form",{className:"stack",onSubmit:P,children:[(0,n.jsxs)("div",{className:"form-grid two-col",children:[(0,n.jsxs)("div",{className:"input-group",children:[n.jsx("label",{htmlFor:"link-label",children:"Label"}),n.jsx("input",{id:"link-label",type:"text",required:!0,value:g.label,onChange:e=>N("label",e.target.value)})]}),(0,n.jsxs)("div",{className:"input-group",children:[n.jsx("label",{htmlFor:"link-url",children:"URL"}),n.jsx("input",{id:"link-url",type:"url",required:!0,value:g.url,onChange:e=>N("url",e.target.value)})]})]}),(0,n.jsxs)("div",{className:"form-grid two-col",children:[(0,n.jsxs)("div",{className:"input-group",children:[n.jsx("label",{htmlFor:"link-category",children:"Category"}),n.jsx("select",{id:"link-category",value:g.category,onChange:e=>N("category",e.target.value),children:o.map(e=>n.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,n.jsxs)("div",{className:"input-group",children:[n.jsx("label",{htmlFor:"link-order",children:"Order"}),n.jsx("input",{id:"link-order",type:"number",min:"0",value:g.order,onChange:e=>N("order",Number(e.target.value))})]})]}),"social"===g.category?(0,n.jsxs)("div",{className:"input-group",children:[n.jsx("label",{htmlFor:"link-icon",children:"Icon"}),n.jsx("select",{id:"link-icon",value:g.icon||"",onChange:e=>N("icon",e.target.value),children:c.map(e=>n.jsx("option",{value:e.value,children:e.label},e.value||"auto"))}),n.jsx("span",{style:{fontSize:"0.8rem",color:"#555"},children:"This icon is shown for the link on the public site."})]}):null,(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("input",{type:"checkbox",checked:g.is_active,onChange:e=>N("is_active",e.target.checked)}),n.jsx("span",{children:"Visible"})]}),(0,n.jsxs)("div",{className:"actions",children:[n.jsx("button",{type:"button",className:"button secondary",onClick:w,disabled:f,children:"Cancel"}),n.jsx("button",{type:"submit",className:"button",disabled:f,children:f?"Saving…":"Save link"})]})]})]})}):null]})}},4985:(e,t,a)=>{"use strict";async function n(e,t={}){let a=`https://api.komunitaschineseindonesia.com${e}`,n="undefined"!=typeof FormData&&t.body instanceof FormData?{...t.headers||{}}:{"Content-Type":"application/json",...t.headers||{}},i=await fetch(a,{...t,headers:n});if(!i.ok){let e=i.statusText;try{let t=await i.json();e=t?.message||e}catch(e){}throw Error(e||"Request failed")}return 204===i.status?null:await i.json()}function i(e){return n(e,{method:"GET"})}function s(e,t){return n(e,{method:"POST",body:JSON.stringify(t)})}function r(e,t){return n(e,{method:"POST",body:t})}function l(e){return n(e,{method:"DELETE"})}a.d(t,{QW:()=>l,R1:()=>i,sg:()=>s,zi:()=>r})},4707:(e,t,a)=>{"use strict";function n(e){}function i(){}a.d(t,{Ov:()=>i,ed:()=>n})},5449:(e,t,a)=>{"use strict";function n(e){if(!e)return"";let t=new Date(new Date(e).toLocaleString("en-US",{timeZone:"Asia/Jakarta",hour12:!1})),a=e=>String(e).padStart(2,"0"),n=t.getFullYear(),i=a(t.getMonth()+1),s=a(t.getDate()),r=a(t.getHours()),l=a(t.getMinutes());return`${n}-${i}-${s}T${r}:${l}`}function i(e){if(!e)return null;let[t,a]=e.split("T"),n=5===a.length?`${a}:00`:a;return new Date(`${t}T${n}+07:00`).toISOString()}function s(e=[]){return[...e].sort((e,t)=>(e.order??0)-(t.order??0))}a.d(t,{HN:()=>s,Iu:()=>i,Nl:()=>n})},1043:(e,t,a)=>{"use strict";var n=a(2854);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}})},9115:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>s,default:()=>l});var n=a(3189);let i=(0,n.createProxy)(String.raw`C:\Users\alpha\OneDrive\Documents\GitHub\website-kci\apps\web\app\admin\layout.js`),{__esModule:s,$$typeof:r}=i;i.default;let l=(0,n.createProxy)(String.raw`C:\Users\alpha\OneDrive\Documents\GitHub\website-kci\apps\web\app\admin\layout.js#default`)},3818:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>s,default:()=>l});var n=a(3189);let i=(0,n.createProxy)(String.raw`C:\Users\alpha\OneDrive\Documents\GitHub\website-kci\apps\web\app\admin\links\page.js`),{__esModule:s,$$typeof:r}=i;i.default;let l=(0,n.createProxy)(String.raw`C:\Users\alpha\OneDrive\Documents\GitHub\website-kci\apps\web\app\admin\links\page.js#default`)},3358:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s,metadata:()=>i});var n=a(9013);a(1);let i={title:{default:"Komunitas Chinese Indonesia",template:"%s — Komunitas Chinese Indonesia"},description:"Komunitas Chinese Indonesia (KCI) menjadi ruang kolaborasi untuk melestarikan budaya dan menggerakkan komunitas."};function s({children:e}){return n.jsx("html",{lang:"id",children:n.jsx("body",{children:e})})}},1:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[592,649,83],()=>a(986));module.exports=n})();