(()=>{var e={};e.id=439,e.ids=[439],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7587:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>r.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(6323),t(9115),t(3358),t(7824);var n=t(3282),a=t(5736),i=t(3906),r=t.n(i),o=t(6880),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let d=["",{children:["admin",{children:["messages",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6323)),"C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\admin\\messages\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9115)),"C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\admin\\layout.js"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,3358)),"C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7824,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\admin\\messages\\page.js"],u="/admin/messages/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/messages/page",pathname:"/admin/messages",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5786:(e,s,t)=>{Promise.resolve().then(t.bind(t,2802))},686:(e,s,t)=>{Promise.resolve().then(t.bind(t,1025))},8412:()=>{},4090:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,4424,23)),Promise.resolve().then(t.t.bind(t,7752,23)),Promise.resolve().then(t.t.bind(t,5275,23)),Promise.resolve().then(t.t.bind(t,9842,23)),Promise.resolve().then(t.t.bind(t,1633,23)),Promise.resolve().then(t.t.bind(t,9224,23))},2802:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var n=t(3227),a=t(649),i=t(1043),r=t(3677),o=t(4707);let l=[{href:"/admin/posts",label:"Posts"},{href:"/admin/events",label:"Events"},{href:"/admin/media",label:"Media"},{href:"/admin/contacts",label:"Contacts"},{href:"/admin/links",label:"Links"},{href:"/admin/messages",label:"Messages"}];function d({children:e}){let s=(0,i.usePathname)(),t=(0,i.useRouter)(),[d,c]=(0,r.useState)(!1);return d?(0,n.jsxs)("div",{children:[n.jsx("nav",{className:"admin-nav",children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("ul",{children:l.map(e=>{let t=s?.startsWith(e.href);return n.jsx("li",{children:n.jsx(a.default,{href:e.href,className:t?"active":void 0,children:e.label})},e.href)})}),n.jsx("div",{style:{paddingRight:"1.5rem"},children:n.jsx("button",{className:"button secondary",onClick:function(){(0,o.Ov)(),t.replace("/login")},children:"Sign out"})})]})}),n.jsx("main",{children:e})]}):null}},1025:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var n=t(3227),a=t(3677),i=t(3083),r=t(4985);function o(){let{data:e,error:s,isLoading:t}=(0,i.ZP)("/messaging",()=>(0,r.R1)("/messaging")),o=(0,a.useMemo)(()=>e?.messages??[],[e]),[l,d]=(0,a.useState)(null),c=o.find(e=>e.id===l)??null;return(0,n.jsxs)("section",{children:[n.jsx("header",{className:"action-bar",children:(0,n.jsxs)("div",{children:[n.jsx("h1",{style:{margin:0},children:"Messages"}),n.jsx("p",{style:{margin:0,color:"#555"},children:"Incoming enquiries from the website contact form. Messages are read-only in Phase 1."})]})}),s?n.jsx("div",{className:"alert",children:s.message}):null,t?n.jsx("p",{children:"Loading messages…"}):0===o.length?n.jsx("div",{className:"empty-state",children:"No messages yet. New enquiries will appear here."}):(0,n.jsxs)("div",{className:"message-list",children:[n.jsx("div",{className:"message-items",role:"list",children:o.map(e=>(0,n.jsxs)("button",{type:"button",role:"listitem",className:e.id===l?"active":void 0,onClick:()=>d(e.id),children:[n.jsx("div",{style:{fontWeight:600},children:e.sender_name}),n.jsx("div",{style:{fontSize:"0.85rem",color:"#555"},children:e.sender_email}),n.jsx("div",{style:{marginTop:"0.25rem",fontSize:"0.8rem",color:"#777"},children:new Date(e.created_at).toLocaleString("en-US",{timeZone:"Asia/Jakarta"})})]},e.id))}),n.jsx("div",{className:"message-detail",children:c?(0,n.jsxs)("div",{className:"stack",children:[(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{margin:"0 0 0.25rem"},children:c.subject||"No subject"}),(0,n.jsxs)("div",{style:{color:"#555"},children:["From ",n.jsx("strong",{children:c.sender_name})," \xb7"," ",n.jsx("a",{href:`mailto:${c.sender_email}`,children:c.sender_email})]}),(0,n.jsxs)("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#666"},children:["Received ",new Date(c.created_at).toLocaleString("en-US",{timeZone:"Asia/Jakarta"})]})]}),n.jsx("div",{style:{whiteSpace:"pre-wrap",lineHeight:1.6},children:c.body})]}):n.jsx("p",{style:{margin:0},children:"Select a message to read it."})})]})]})}},4985:(e,s,t)=>{"use strict";async function n(e,s={}){let t=`https://api.komunitaschineseindonesia.com${e}`,n="undefined"!=typeof FormData&&s.body instanceof FormData?{...s.headers||{}}:{"Content-Type":"application/json",...s.headers||{}},a=await fetch(t,{...s,headers:n});if(!a.ok){let e=a.statusText;try{let s=await a.json();e=s?.message||e}catch(e){}throw Error(e||"Request failed")}return 204===a.status?null:await a.json()}function a(e){return n(e,{method:"GET"})}function i(e,s){return n(e,{method:"POST",body:JSON.stringify(s)})}function r(e,s){return n(e,{method:"POST",body:s})}function o(e){return n(e,{method:"DELETE"})}t.d(s,{QW:()=>o,R1:()=>a,sg:()=>i,zi:()=>r})},4707:(e,s,t)=>{"use strict";function n(e){}function a(){}t.d(s,{Ov:()=>a,ed:()=>n})},1043:(e,s,t)=>{"use strict";var n=t(2854);t.o(n,"usePathname")&&t.d(s,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(s,{useRouter:function(){return n.useRouter}})},9115:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>i,default:()=>o});var n=t(3189);let a=(0,n.createProxy)(String.raw`C:\Users\alpha\OneDrive\Documents\GitHub\website-kci\apps\web\app\admin\layout.js`),{__esModule:i,$$typeof:r}=a;a.default;let o=(0,n.createProxy)(String.raw`C:\Users\alpha\OneDrive\Documents\GitHub\website-kci\apps\web\app\admin\layout.js#default`)},6323:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>i,default:()=>o});var n=t(3189);let a=(0,n.createProxy)(String.raw`C:\Users\alpha\OneDrive\Documents\GitHub\website-kci\apps\web\app\admin\messages\page.js`),{__esModule:i,$$typeof:r}=a;a.default;let o=(0,n.createProxy)(String.raw`C:\Users\alpha\OneDrive\Documents\GitHub\website-kci\apps\web\app\admin\messages\page.js#default`)},3358:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i,metadata:()=>a});var n=t(9013);t(1);let a={title:{default:"Komunitas Chinese Indonesia",template:"%s — Komunitas Chinese Indonesia"},description:"Komunitas Chinese Indonesia (KCI) menjadi ruang kolaborasi untuk melestarikan budaya dan menggerakkan komunitas."};function i({children:e}){return n.jsx("html",{lang:"id",children:n.jsx("body",{children:e})})}},1:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),n=s.X(0,[592,649,83],()=>t(7587));module.exports=n})();