(()=>{var e={};e.id=206,e.ids=[206],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9261:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(4839),s(9115),s(3358),s(7824);var a=s(3282),i=s(5736),r=s(3906),n=s.n(r),l=s(6880),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["events",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4839)),"C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\admin\\events\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9115)),"C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\admin\\layout.js"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,3358)),"C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7824,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\alpha\\OneDrive\\Documents\\GitHub\\website-kci\\apps\\web\\app\\admin\\events\\page.js"],u="/admin/events/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/events/page",pathname:"/admin/events",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2292:(e,t,s)=>{Promise.resolve().then(s.bind(s,7687))},7687:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(3227),i=s(3677),r=s(3083),n=s(2429),l=s(8770),o=s(4985),d=s(5449);function c(){return{title:"",slug:"",summary:"",description:"",location:"",starts_at:(0,d.Nl)(new Date().toISOString()),ends_at:"",hero_image_url:"",is_published:!1}}function u(){let{data:e,error:t,isLoading:s,mutate:u}=(0,r.ZP)("/events",()=>(0,o.R1)("/events")),h=(0,i.useMemo)(()=>e?.events??[],[e]),[p,m]=(0,i.useState)(!1),[x,g]=(0,i.useState)(""),[v,b]=(0,i.useState)(!1),[j,_]=(0,i.useState)(()=>c()),[y,f]=(0,i.useState)(null),[w,N]=(0,i.useState)(!1),S=(0,i.useId)(),C=`${S}-help`;function k(){m(!1),b(!1),g("")}function D(e,t){_(s=>({...s,[e]:t}))}async function P(e){e.preventDefault(),b(!0),g("");let t={id:y??void 0,title:j.title,slug:j.slug,summary:j.summary||null,description:j.description||null,location:j.location||null,hero_image_url:j.hero_image_url||null,is_published:j.is_published,starts_at:(0,d.Iu)(j.starts_at)??new Date().toISOString(),ends_at:j.ends_at?(0,d.Iu)(j.ends_at):null};try{await (0,o.sg)("/events",t),await u(),k()}catch(e){g(e.message||"Failed to save event")}finally{b(!1)}}async function q(e){try{await (0,o.sg)("/events",{...e,summary:e.summary??null,description:e.description??null,location:e.location??null,hero_image_url:e.hero_image_url??null,starts_at:e.starts_at,ends_at:e.ends_at,is_published:!e.is_published}),await u()}catch(e){alert(e.message||"Failed to update publish status")}}return(0,a.jsxs)("section",{children:[(0,a.jsxs)("header",{className:"action-bar",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{style:{margin:0},children:"Events"}),a.jsx("p",{style:{margin:0,color:"#555"},children:"Manage upcoming events. Toggle publish status to control visibility on the site."})]}),a.jsx("button",{className:"button",onClick:function(){_(c()),f(null),g(""),m(!0)},children:"New event"})]}),t?a.jsx("div",{className:"alert",children:t.message}):null,s?a.jsx("p",{children:"Loading events…"}):0===h.length?a.jsx("div",{className:"empty-state",children:"No events yet. Create your first event."}):(0,a.jsxs)("table",{className:"table",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:"Title"}),a.jsx("th",{children:"Starts"}),a.jsx("th",{children:"Ends"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:h.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{children:(0,a.jsxs)("div",{className:"stack",children:[a.jsx("strong",{children:e.title}),a.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:e.slug})]})}),a.jsx("td",{children:new Date(e.starts_at).toLocaleString("en-US",{timeZone:"Asia/Jakarta"})}),a.jsx("td",{children:e.ends_at?new Date(e.ends_at).toLocaleString("en-US",{timeZone:"Asia/Jakarta"}):"—"}),a.jsx("td",{children:a.jsx("span",{className:"badge",style:{background:e.is_published?"#dcfce7":"#fee2e2",color:e.is_published?"#166534":"#7f1d1d"},children:e.is_published?"Published":"Draft"})}),a.jsx("td",{children:(0,a.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{className:"button secondary",onClick:()=>{_({...e,summary:e.summary??"",description:e.description??"",location:e.location??"",hero_image_url:e.hero_image_url??"",starts_at:(0,d.Nl)(e.starts_at),ends_at:(0,d.Nl)(e.ends_at)}),f(e.id),g(""),m(!0)},children:"Edit"}),a.jsx("button",{className:"button",onClick:()=>q(e),children:e.is_published?"Unpublish":"Publish"})]})})]},e.id))})]}),p?a.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:(0,a.jsxs)("div",{className:"modal",children:[(0,a.jsxs)("header",{className:"stack",style:{marginBottom:"1rem"},children:[a.jsx("h2",{style:{margin:0},children:y?"Edit event":"Create event"}),a.jsx("p",{style:{margin:0,color:"#555"},children:"Fill in the event details. Times are saved in Jakarta time (UTC+7)."})]}),x?a.jsx("div",{className:"alert",children:x}):null,(0,a.jsxs)("form",{className:"form-grid",onSubmit:P,children:[(0,a.jsxs)("div",{className:"form-grid two-col",children:[(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"title",children:"Title"}),a.jsx("input",{id:"title",type:"text",required:!0,value:j.title,onChange:e=>D("title",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"slug",children:"Slug"}),a.jsx("input",{id:"slug",type:"text",required:!0,value:j.slug,onChange:e=>D("slug",e.target.value)})]})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"summary",children:"Summary"}),a.jsx("textarea",{id:"summary",rows:2,value:j.summary,onChange:e=>D("summary",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"description",children:"Description"}),a.jsx("textarea",{id:"description",rows:4,value:j.description,onChange:e=>D("description",e.target.value)})]}),(0,a.jsxs)("div",{className:"form-grid two-col",children:[(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"location",children:"Location"}),a.jsx("input",{id:"location",type:"text",value:j.location,onChange:e=>D("location",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{id:S,htmlFor:"hero",children:"Hero image"}),a.jsx(l.C,{value:j.hero_image_url,onChange:e=>D("hero_image_url",e),uploadType:"events",ariaLabelledBy:S,ariaDescribedBy:C,disabled:v,helperText:"Upload the featured image for this event."}),a.jsx("span",{id:C,style:{fontSize:"0.8rem",color:"#555"},children:"Prefer an external resource? Paste its link below or reuse an item from the media library."}),(0,a.jsxs)("div",{className:"stack",style:{gap:"0.5rem"},children:[a.jsx("input",{id:"hero",type:"text",placeholder:"https://example.com/image.jpg or /uploads/example.jpg",value:j.hero_image_url,onChange:e=>D("hero_image_url",e.target.value)}),(0,a.jsxs)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[a.jsx("button",{type:"button",className:"button secondary",onClick:()=>N(!0),children:"Choose from media library"}),j.hero_image_url?a.jsx("button",{type:"button",className:"button secondary",onClick:()=>D("hero_image_url",""),children:"Remove image"}):null]}),j.hero_image_url?a.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.75rem",overflow:"hidden",width:"100%",maxWidth:"320px"},children:a.jsx("img",{src:j.hero_image_url,alt:"Selected hero",style:{width:"100%",display:"block",objectFit:"cover"}})}):null]})]})]}),(0,a.jsxs)("div",{className:"form-grid two-col",children:[(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"starts_at",children:"Starts at"}),a.jsx("input",{id:"starts_at",type:"datetime-local",required:!0,value:j.starts_at,onChange:e=>D("starts_at",e.target.value)})]}),(0,a.jsxs)("div",{className:"input-group",children:[a.jsx("label",{htmlFor:"ends_at",children:"Ends at"}),a.jsx("input",{id:"ends_at",type:"datetime-local",value:j.ends_at,onChange:e=>D("ends_at",e.target.value)})]})]}),(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("input",{type:"checkbox",checked:j.is_published,onChange:e=>D("is_published",e.target.checked)}),a.jsx("span",{children:"Published"})]}),(0,a.jsxs)("div",{className:"actions",children:[a.jsx("button",{type:"button",className:"button secondary",onClick:k,disabled:v,children:"Cancel"}),a.jsx("button",{type:"submit",className:"button",disabled:v,children:v?"Saving…":"Save event"})]})]})]})}):null,a.jsx(n.R,{open:w,onClose:()=>N(!1),onSelect:function(e){e&&(D("hero_image_url",e.asset_url||""),N(!1))}})]})}},5449:(e,t,s)=>{"use strict";function a(e){if(!e)return"";let t=new Date(new Date(e).toLocaleString("en-US",{timeZone:"Asia/Jakarta",hour12:!1})),s=e=>String(e).padStart(2,"0"),a=t.getFullYear(),i=s(t.getMonth()+1),r=s(t.getDate()),n=s(t.getHours()),l=s(t.getMinutes());return`${a}-${i}-${r}T${n}:${l}`}function i(e){if(!e)return null;let[t,s]=e.split("T"),a=5===s.length?`${s}:00`:s;return new Date(`${t}T${a}+07:00`).toISOString()}function r(e=[]){return[...e].sort((e,t)=>(e.order??0)-(t.order??0))}s.d(t,{HN:()=>r,Iu:()=>i,Nl:()=>a})},4839:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});var a=s(3189);let i=(0,a.createProxy)(String.raw`C:\Users\alpha\OneDrive\Documents\GitHub\website-kci\apps\web\app\admin\events\page.js`),{__esModule:r,$$typeof:n}=i;i.default;let l=(0,a.createProxy)(String.raw`C:\Users\alpha\OneDrive\Documents\GitHub\website-kci\apps\web\app\admin\events\page.js#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[592,649,83,558],()=>s(9261));module.exports=a})();