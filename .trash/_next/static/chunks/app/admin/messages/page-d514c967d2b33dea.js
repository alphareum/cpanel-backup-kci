(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{6156:function(e,n,t){Promise.resolve().then(t.bind(t,3612))},3612:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return l}});var s=t(7573),i=t(7653),r=t(8428),a=t(7656);function l(){var e;let{data:n,error:t,isLoading:l}=(0,r.ZP)("/messaging",()=>(0,a.R1)("/messaging")),o=(0,i.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n.messages)&&void 0!==e?e:[]},[n]),[c,d]=(0,i.useState)(null);(0,i.useEffect)(()=>{0===o.length?d(null):c&&o.find(e=>e.id===c)||d(o[0].id)},[o,c]);let u=null!==(e=o.find(e=>e.id===c))&&void 0!==e?e:null;return(0,s.jsxs)("section",{children:[(0,s.jsx)("header",{className:"action-bar",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{style:{margin:0},children:"Messages"}),(0,s.jsx)("p",{style:{margin:0,color:"#555"},children:"Incoming enquiries from the website contact form. Messages are read-only in Phase 1."})]})}),t?(0,s.jsx)("div",{className:"alert",children:t.message}):null,l?(0,s.jsx)("p",{children:"Loading messagesâ€¦"}):0===o.length?(0,s.jsx)("div",{className:"empty-state",children:"No messages yet. New enquiries will appear here."}):(0,s.jsxs)("div",{className:"message-list",children:[(0,s.jsx)("div",{className:"message-items",role:"list",children:o.map(e=>(0,s.jsxs)("button",{type:"button",role:"listitem",className:e.id===c?"active":void 0,onClick:()=>d(e.id),children:[(0,s.jsx)("div",{style:{fontWeight:600},children:e.sender_name}),(0,s.jsx)("div",{style:{fontSize:"0.85rem",color:"#555"},children:e.sender_email}),(0,s.jsx)("div",{style:{marginTop:"0.25rem",fontSize:"0.8rem",color:"#777"},children:new Date(e.created_at).toLocaleString("en-US",{timeZone:"Asia/Jakarta"})})]},e.id))}),(0,s.jsx)("div",{className:"message-detail",children:u?(0,s.jsxs)("div",{className:"stack",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{style:{margin:"0 0 0.25rem"},children:u.subject||"No subject"}),(0,s.jsxs)("div",{style:{color:"#555"},children:["From ",(0,s.jsx)("strong",{children:u.sender_name})," \xb7"," ",(0,s.jsx)("a",{href:"mailto:".concat(u.sender_email),children:u.sender_email})]}),(0,s.jsxs)("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#666"},children:["Received ",new Date(u.created_at).toLocaleString("en-US",{timeZone:"Asia/Jakarta"})]})]}),(0,s.jsx)("div",{style:{whiteSpace:"pre-wrap",lineHeight:1.6},children:u.body})]}):(0,s.jsx)("p",{style:{margin:0},children:"Select a message to read it."})})]})]})}},7656:function(e,n,t){"use strict";async function s(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat("http://127.0.0.1:3001/api").concat(e),s="undefined"!=typeof FormData&&n.body instanceof FormData?{...n.headers||{}}:{"Content-Type":"application/json",...n.headers||{}},i=await fetch(t,{...n,headers:s});if(!i.ok){let e=i.statusText;try{let n=await i.json();e=(null==n?void 0:n.message)||e}catch(e){}throw Error(e||"Request failed")}return 204===i.status?null:await i.json()}function i(e){return s(e,{method:"GET"})}function r(e,n){return s(e,{method:"POST",body:JSON.stringify(n)})}function a(e,n){return s(e,{method:"POST",body:n})}function l(e){return s(e,{method:"DELETE"})}t.d(n,{QW:function(){return l},R1:function(){return i},sg:function(){return r},zi:function(){return a}})}},function(e){e.O(0,[428,293,286,744],function(){return e(e.s=6156)}),_N_E=e.O()}]);