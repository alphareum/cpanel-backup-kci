(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{8142:function(e,n,t){Promise.resolve().then(t.bind(t,7864))},7864:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return u}});var a=t(7573),i=t(7653),s=t(7754),r=t(4077),o=t(7656);function u(){let e=(0,s.useRouter)(),[n,t]=(0,i.useState)(""),[u,c]=(0,i.useState)(""),[l,d]=(0,i.useState)(!1),[f,h]=(0,i.useState)("");async function m(t){t.preventDefault(),d(!0),h("");try{let t=await (0,o.sg)("/auth/login",{email:n,password:u});(0,r.ed)(t),e.replace("/admin")}catch(e){h(e.message||"Login failed")}finally{d(!1)}}return(0,i.useEffect)(()=>{(0,r.Gg)()&&e.replace("/admin")},[e]),(0,a.jsx)("main",{style:{display:"grid",placeItems:"center",minHeight:"100vh"},children:(0,a.jsx)("div",{className:"card",style:{width:"min(420px, 100%)"},children:(0,a.jsxs)("div",{className:"stack",children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("h1",{style:{margin:0},children:"KCI CMS Login"}),(0,a.jsx)("p",{style:{marginTop:"0.35rem",color:"#555"},children:"Enter your admin credentials to continue."})]}),f?(0,a.jsx)("div",{className:"alert",children:f}):null,(0,a.jsxs)("form",{className:"stack",onSubmit:m,children:[(0,a.jsxs)("label",{className:"stack",children:[(0,a.jsx)("span",{children:"Email"}),(0,a.jsx)("input",{type:"email",required:!0,value:n,onChange:e=>t(e.target.value),placeholder:"admin@example.com"})]}),(0,a.jsxs)("label",{className:"stack",children:[(0,a.jsx)("span",{children:"Password"}),(0,a.jsx)("input",{type:"password",required:!0,value:u,onChange:e=>c(e.target.value),placeholder:"••••••••"})]}),(0,a.jsx)("button",{className:"button",type:"submit",disabled:l,children:l?"Signing in…":"Sign in"})]})]})})})}},7656:function(e,n,t){"use strict";async function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat("https://api.komunitaschineseindonesia.com/api").concat(e),a="undefined"!=typeof FormData&&n.body instanceof FormData?{...n.headers||{}}:{"Content-Type":"application/json",...n.headers||{}},i=await fetch(t,{...n,headers:a});if(!i.ok){let e=i.statusText;try{let n=await i.json();e=(null==n?void 0:n.message)||e}catch(e){}throw Error(e||"Request failed")}return 204===i.status?null:await i.json()}function i(e){return a(e,{method:"GET"})}function s(e,n){return a(e,{method:"POST",body:JSON.stringify(n)})}function r(e,n){return a(e,{method:"POST",body:n})}function o(e){return a(e,{method:"DELETE"})}t.d(n,{QW:function(){return o},R1:function(){return i},sg:function(){return s},zi:function(){return r}})},4077:function(e,n,t){"use strict";t.d(n,{Gg:function(){return i},Ov:function(){return r},ed:function(){return s}});let a="kci_admin_session";function i(){try{let e=window.localStorage.getItem(a);return e?JSON.parse(e):null}catch(e){return console.warn("Failed to read session",e),null}}function s(e){window.localStorage.setItem(a,JSON.stringify(e))}function r(){window.localStorage.removeItem(a)}},7754:function(e,n,t){"use strict";var a=t(534);t.o(a,"usePathname")&&t.d(n,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(n,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[293,286,744],function(){return e(e.s=8142)}),_N_E=e.O()}]);