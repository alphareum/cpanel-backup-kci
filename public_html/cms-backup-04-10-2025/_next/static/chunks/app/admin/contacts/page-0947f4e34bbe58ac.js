(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{6927:function(e,t,a){Promise.resolve().then(a.bind(a,9058))},9058:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var l=a(7573),n=a(7653),s=a(8428),o=a(3978),i=a(7656);function r(){return{id:null,name:"",role:"",phone:"",whatsapp_url:"",photo_url:""}}function c(){let{data:e,error:t,isLoading:a,mutate:c}=(0,s.ZP)("/contacts",()=>(0,i.R1)("/contacts")),d=(0,n.useMemo)(()=>{var t;return null!==(t=null==e?void 0:e.contacts)&&void 0!==t?t:[]},[e]),[u,h]=(0,n.useState)(!1),[p,m]=(0,n.useState)(()=>r()),[x,j]=(0,n.useState)(""),[f,v]=(0,n.useState)(!1),[g,y]=(0,n.useState)(!1);function b(){h(!1),v(!1),j("")}function N(e,t){m(a=>({...a,[e]:t}))}async function w(e){var t;e.preventDefault(),v(!0),j("");let a={id:null!==(t=p.id)&&void 0!==t?t:void 0,name:p.name.trim(),role:p.role.trim()?p.role.trim():null,phone:p.phone.trim()?p.phone.trim():null,whatsapp_url:p.whatsapp_url.trim()?p.whatsapp_url.trim():null,photo_url:p.photo_url.trim()?p.photo_url.trim():null};try{await (0,i.sg)("/contacts",a),await c(),b()}catch(e){j(e.message||"Failed to save contact")}finally{v(!1)}}async function k(e){if(window.confirm('Delete contact "'.concat(e.name,'"?')))try{await (0,i.QW)("/contacts/".concat(e.id)),await c()}catch(e){alert(e.message||"Failed to delete contact")}}function _(){y(!1)}return(0,l.jsxs)("section",{children:[(0,l.jsxs)("header",{className:"action-bar",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{style:{margin:0},children:"Contacts"}),(0,l.jsx)("p",{style:{margin:0,color:"#555"},children:"Manage the contact cards displayed on the public site. Add WhatsApp links and phone numbers for quick access."})]}),(0,l.jsx)("button",{className:"button",onClick:function(){m(r()),j(""),h(!0)},children:"New contact"})]}),t?(0,l.jsx)("div",{className:"alert",children:t.message}):null,a?(0,l.jsx)("p",{children:"Loading contacts…"}):0===d.length?(0,l.jsx)("div",{className:"empty-state",children:"No contacts yet. Add your first team member."}):(0,l.jsx)("div",{className:"stack",children:d.map(e=>(0,l.jsx)("div",{className:"card",children:(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"1rem",alignItems:"center"},children:[(0,l.jsx)("div",{style:{width:"80px",height:"80px",borderRadius:"9999px",overflow:"hidden",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem",color:"#555"},children:e.photo_url?(0,l.jsx)("img",{src:e.photo_url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,l.jsx)("span",{children:"No photo"})}),(0,l.jsxs)("div",{className:"stack",style:{gap:"0.35rem"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:e.name}),e.role?(0,l.jsx)("span",{style:{display:"block",color:"#555"},children:e.role}):null]}),e.phone?(0,l.jsxs)("span",{style:{color:"#555"},children:["Phone: ",(0,l.jsx)("a",{href:"tel:".concat(e.phone.replace(/\s+/g,"")),children:e.phone})]}):null,e.whatsapp_url?(0,l.jsx)("a",{href:e.whatsapp_url,target:"_blank",rel:"noreferrer",style:{color:"#1f6feb"},children:"WhatsApp link"}):null]}),(0,l.jsxs)("div",{className:"stack",style:{gap:"0.5rem"},children:[(0,l.jsx)("button",{className:"button secondary",onClick:()=>{var t,a,l,n,s;m({id:e.id,name:null!==(t=e.name)&&void 0!==t?t:"",role:null!==(a=e.role)&&void 0!==a?a:"",phone:null!==(l=e.phone)&&void 0!==l?l:"",whatsapp_url:null!==(n=e.whatsapp_url)&&void 0!==n?n:"",photo_url:null!==(s=e.photo_url)&&void 0!==s?s:""}),j(""),h(!0)},children:"Edit"}),(0,l.jsx)("button",{className:"button",onClick:()=>k(e),children:"Delete"})]})]})},e.id))}),u?(0,l.jsx)("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:(0,l.jsxs)("div",{className:"modal",children:[(0,l.jsxs)("header",{className:"stack",style:{marginBottom:"1rem"},children:[(0,l.jsx)("h2",{style:{margin:0},children:p.id?"Edit contact":"Add contact"}),(0,l.jsx)("p",{style:{margin:0,color:"#555"},children:"Provide the contact details that should appear on the website. All fields except name are optional."})]}),x?(0,l.jsx)("div",{className:"alert",children:x}):null,(0,l.jsxs)("form",{className:"stack",onSubmit:w,children:[(0,l.jsxs)("div",{className:"form-grid two-col",children:[(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"contact-name",children:"Name"}),(0,l.jsx)("input",{id:"contact-name",type:"text",value:p.name,onChange:e=>N("name",e.target.value),required:!0})]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"contact-role",children:"Role / Title"}),(0,l.jsx)("input",{id:"contact-role",type:"text",value:p.role,onChange:e=>N("role",e.target.value),placeholder:"e.g. Founder"})]})]}),(0,l.jsxs)("div",{className:"form-grid two-col",children:[(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"contact-phone",children:"Phone number"}),(0,l.jsx)("input",{id:"contact-phone",type:"text",value:p.phone,onChange:e=>N("phone",e.target.value),placeholder:"e.g. +62 812-1234-5678"})]}),(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"contact-whatsapp",children:"WhatsApp link"}),(0,l.jsx)("input",{id:"contact-whatsapp",type:"url",value:p.whatsapp_url,onChange:e=>N("whatsapp_url",e.target.value),placeholder:"https://wa.me/..."})]})]}),(0,l.jsxs)("div",{className:"stack",children:[(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("label",{htmlFor:"contact-photo",children:"Photo URL"}),(0,l.jsx)("input",{id:"contact-photo",type:"url",value:p.photo_url,onChange:e=>N("photo_url",e.target.value),placeholder:"https://example.com/avatar.jpg"})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"button",className:"button secondary",onClick:function(){y(!0)},children:"Choose from media library"})}),p.photo_url?(0,l.jsx)("div",{style:{width:"120px",height:"120px",borderRadius:"9999px",overflow:"hidden",border:"1px solid #e5e7eb"},children:(0,l.jsx)("img",{src:p.photo_url,alt:p.name||"Selected avatar",style:{width:"100%",height:"100%",objectFit:"cover"}})}):null]}),(0,l.jsxs)("footer",{style:{display:"flex",justifyContent:"flex-end",gap:"0.75rem"},children:[(0,l.jsx)("button",{type:"button",className:"button secondary",onClick:b,disabled:f,children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"button",disabled:f,children:f?"Saving…":"Save contact"})]})]})]})}):null,(0,l.jsx)(o.R,{open:g,onClose:_,onSelect:function(e){N("photo_url",e.asset_url||""),_()}})]})}},3978:function(e,t,a){"use strict";a.d(t,{R:function(){return c}});var l=a(7573),n=a(7653),s=a(8428),o=a(7656);let i=[{value:"testimonial",label:"Testimonials"},{value:"partner",label:"Partners"},{value:"gallery",label:"Gallery"}];function r(e){let{type:t,onSelect:a}=e,{data:i,error:r,isLoading:c}=(0,s.ZP)("/media/".concat(t),()=>(0,o.R1)("/media/".concat(t))),d=(0,n.useMemo)(()=>{var e;return null!==(e=null==i?void 0:i.items)&&void 0!==e?e:[]},[i]);return r?(0,l.jsx)("div",{className:"alert",children:r.message}):c?(0,l.jsx)("p",{children:"Loading media…"}):0===d.length?(0,l.jsx)("div",{className:"empty-state",children:"No media in this group yet."}):(0,l.jsx)("div",{className:"stack",children:d.map(e=>(0,l.jsxs)("button",{type:"button",className:"card",style:{textAlign:"left",display:"grid",gridTemplateColumns:"96px 1fr auto",gap:"1rem",alignItems:"center"},onClick:()=>a(e),children:[(0,l.jsx)("div",{style:{width:"96px",height:"96px",borderRadius:"0.75rem",overflow:"hidden",background:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #e5e7eb"},children:e.asset_url?(0,l.jsx)("img",{src:e.asset_url,alt:e.title||"Media asset",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,l.jsx)("span",{style:{color:"#555"},children:"No preview"})}),(0,l.jsxs)("div",{className:"stack",style:{gap:"0.35rem"},children:[(0,l.jsx)("strong",{children:e.title||"Untitled asset"}),e.description?(0,l.jsx)("span",{style:{color:"#555"},children:e.description}):null,(0,l.jsx)("span",{style:{fontSize:"0.85rem",color:"#1f6feb",wordBreak:"break-all"},children:e.asset_url})]}),(0,l.jsx)("span",{className:"badge",style:{justifySelf:"flex-start"},children:"Select"})]},e.id))})}function c(e){var t,a;let{open:s,onClose:o,onSelect:c}=e,[d,u]=(0,n.useState)(null!==(a=null===(t=i[0])||void 0===t?void 0:t.value)&&void 0!==a?a:"testimonial");return((0,n.useEffect)(()=>{if(!s)return;let e=e=>{"Escape"===e.key&&o()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s,o]),s)?(0,l.jsx)("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:(0,l.jsxs)("div",{className:"modal",style:{maxWidth:"720px"},children:[(0,l.jsxs)("header",{className:"stack",style:{marginBottom:"1rem"},children:[(0,l.jsx)("h2",{style:{margin:0},children:"Choose media"}),(0,l.jsx)("p",{style:{margin:0,color:"#555"},children:"Pick an image from the media library. You can manage assets from the Media section of the admin panel."})]}),(0,l.jsx)("div",{className:"tabs",role:"tablist",style:{marginBottom:"1rem"},children:i.map(e=>(0,l.jsx)("button",{type:"button",role:"tab","aria-selected":d===e.value,className:"tab ".concat(d===e.value?"active":""),onClick:()=>u(e.value),children:e.label},e.value))}),(0,l.jsx)("div",{style:{maxHeight:"420px",overflowY:"auto",paddingRight:"0.5rem"},children:(0,l.jsx)(r,{type:d,onSelect:e=>c(e)})}),(0,l.jsx)("footer",{style:{marginTop:"1rem",display:"flex",justifyContent:"flex-end"},children:(0,l.jsx)("button",{type:"button",className:"button secondary",onClick:o,children:"Close"})})]})}):null}},7656:function(e,t,a){"use strict";async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat("https://api.komunitaschineseindonesia.com/api").concat(e),l="undefined"!=typeof FormData&&t.body instanceof FormData?{...t.headers||{}}:{"Content-Type":"application/json",...t.headers||{}},n=await fetch(a,{...t,headers:l});if(!n.ok){let e=n.statusText;try{let t=await n.json();e=(null==t?void 0:t.message)||e}catch(e){}throw Error(e||"Request failed")}return 204===n.status?null:await n.json()}function n(e){return l(e,{method:"GET"})}function s(e,t){return l(e,{method:"POST",body:JSON.stringify(t)})}function o(e,t){return l(e,{method:"POST",body:t})}function i(e){return l(e,{method:"DELETE"})}a.d(t,{QW:function(){return i},R1:function(){return n},sg:function(){return s},zi:function(){return o}})}},function(e){e.O(0,[428,293,286,744],function(){return e(e.s=6927)}),_N_E=e.O()}]);