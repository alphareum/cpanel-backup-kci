(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16],{1886:function(e,t,n){Promise.resolve().then(n.bind(n,9727))},9727:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var i=n(7573),a=n(7653),l=n(8428),r=n(7656),s=n(5662);let c=[{value:"primary",label:"Primary navigation"},{value:"secondary",label:"Secondary navigation"},{value:"social",label:"Social links"}];function o(){return{id:null,label:"",url:"",category:"primary",order:0,is_active:!0}}function d(){let{data:e,error:t,isLoading:n,mutate:d}=(0,l.ZP)("/links",()=>(0,r.R1)("/links")),u=(0,a.useMemo)(()=>{var t;return null!==(t=null==e?void 0:e.links)&&void 0!==t?t:[]},[e]),[h,m]=(0,a.useState)(!1),[g,v]=(0,a.useState)(()=>o()),[f,p]=(0,a.useState)(""),[b,y]=(0,a.useState)(!1),[x,j]=(0,a.useState)(!1);function k(){m(!1),y(!1),p("")}function N(e,t){v(n=>({...n,[e]:t}))}async function w(e){var t;e.preventDefault(),y(!0),p("");let n={id:null!==(t=g.id)&&void 0!==t?t:void 0,label:g.label,url:g.url,category:g.category,order:Number(g.order)||0,is_active:!!g.is_active};try{await (0,r.sg)("/links",n),await d(),k()}catch(e){p(e.message||"Failed to save link")}finally{y(!1)}}async function S(e){if(window.confirm('Delete link "'.concat(e.label,'"?')))try{await (0,r.QW)("/links/".concat(e.id)),await d()}catch(e){alert(e.message||"Failed to delete link")}}async function C(e,t){let n=(0,s.HN)(u.filter(t=>t.category===e.category)),i=n.findIndex(t=>t.id===e.id),a="up"===t?i-1:i+1;if(a<0||a>=n.length)return;let l=[...n],[c]=l.splice(i,1);l.splice(a,0,c),j(!0);try{await Promise.all(l.map((e,t)=>(0,r.sg)("/links",{...e,order:t}))),await d()}catch(e){alert(e.message||"Failed to update order")}finally{j(!1)}}return(0,i.jsxs)("section",{children:[(0,i.jsxs)("header",{className:"action-bar",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{style:{margin:0},children:"Navigation & Links"}),(0,i.jsx)("p",{style:{margin:0,color:"#555"},children:"Organise menu items and social links. Use the arrow buttons to reorder items within their group."})]}),(0,i.jsx)("button",{className:"button",onClick:function(){v(o()),p(""),m(!0)},children:"New link"})]}),t?(0,i.jsx)("div",{className:"alert",children:t.message}):null,n?(0,i.jsx)("p",{children:"Loading links…"}):0===u.length?(0,i.jsx)("div",{className:"empty-state",children:"No links yet. Add your first navigation item."}):(0,i.jsx)("div",{className:"stack",children:c.map(e=>{let t=(0,s.HN)(u.filter(t=>t.category===e.value));return(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("header",{className:"action-bar",style:{marginBottom:"0.5rem"},children:(0,i.jsx)("h2",{style:{margin:0},children:e.label})}),0===t.length?(0,i.jsx)("p",{style:{margin:0,color:"#666"},children:"No links in this group."}):(0,i.jsx)("div",{className:"stack",children:t.map(e=>(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"center",border:"1px solid #eee",borderRadius:"0.5rem",padding:"0.75rem 1rem",background:"#fff"},children:[(0,i.jsxs)("div",{className:"stack",children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,i.jsx)("strong",{children:e.label}),(0,i.jsx)("span",{className:"badge",style:{background:e.is_active?"#dcfce7":"#fee2e2",color:e.is_active?"#166534":"#7f1d1d"},children:e.is_active?"Active":"Hidden"})]}),(0,i.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.url})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,i.jsx)("button",{className:"button secondary",onClick:()=>C(e,"up"),disabled:x,children:"↑"}),(0,i.jsx)("button",{className:"button secondary",onClick:()=>C(e,"down"),disabled:x,children:"↓"}),(0,i.jsx)("button",{className:"button secondary",onClick:()=>{v({...e}),p(""),m(!0)},children:"Edit"}),(0,i.jsx)("button",{className:"button",onClick:()=>S(e),children:"Delete"})]})]},e.id))})]},e.value)})}),h?(0,i.jsx)("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true",children:(0,i.jsxs)("div",{className:"modal",children:[(0,i.jsxs)("header",{className:"stack",style:{marginBottom:"1rem"},children:[(0,i.jsx)("h2",{style:{margin:0},children:g.id?"Edit link":"Add link"}),(0,i.jsx)("p",{style:{margin:0,color:"#555"},children:"Choose the destination, placement, and visibility for this navigation item."})]}),f?(0,i.jsx)("div",{className:"alert",children:f}):null,(0,i.jsxs)("form",{className:"stack",onSubmit:w,children:[(0,i.jsxs)("div",{className:"form-grid two-col",children:[(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("label",{htmlFor:"link-label",children:"Label"}),(0,i.jsx)("input",{id:"link-label",type:"text",required:!0,value:g.label,onChange:e=>N("label",e.target.value)})]}),(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("label",{htmlFor:"link-url",children:"URL"}),(0,i.jsx)("input",{id:"link-url",type:"url",required:!0,value:g.url,onChange:e=>N("url",e.target.value)})]})]}),(0,i.jsxs)("div",{className:"form-grid two-col",children:[(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("label",{htmlFor:"link-category",children:"Category"}),(0,i.jsx)("select",{id:"link-category",value:g.category,onChange:e=>N("category",e.target.value),children:c.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("label",{htmlFor:"link-order",children:"Order"}),(0,i.jsx)("input",{id:"link-order",type:"number",min:"0",value:g.order,onChange:e=>N("order",Number(e.target.value))})]})]}),(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,i.jsx)("input",{type:"checkbox",checked:g.is_active,onChange:e=>N("is_active",e.target.checked)}),(0,i.jsx)("span",{children:"Visible"})]}),(0,i.jsxs)("div",{className:"actions",children:[(0,i.jsx)("button",{type:"button",className:"button secondary",onClick:k,disabled:b,children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"button",disabled:b,children:b?"Saving…":"Save link"})]})]})]})}):null]})}},7656:function(e,t,n){"use strict";async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat("https://api.komunitaschineseindonesia.com/api").concat(e),i="undefined"!=typeof FormData&&t.body instanceof FormData?{...t.headers||{}}:{"Content-Type":"application/json",...t.headers||{}},a=await fetch(n,{...t,headers:i});if(!a.ok){let e=a.statusText;try{let t=await a.json();e=(null==t?void 0:t.message)||e}catch(e){}throw Error(e||"Request failed")}return 204===a.status?null:await a.json()}function a(e){return i(e,{method:"GET"})}function l(e,t){return i(e,{method:"POST",body:JSON.stringify(t)})}function r(e,t){return i(e,{method:"POST",body:t})}function s(e){return i(e,{method:"DELETE"})}n.d(t,{QW:function(){return s},R1:function(){return a},sg:function(){return l},zi:function(){return r}})},5662:function(e,t,n){"use strict";function i(e){if(!e)return"";let t=new Date(new Date(e).toLocaleString("en-US",{timeZone:"Asia/Jakarta",hour12:!1})),n=e=>String(e).padStart(2,"0"),i=t.getFullYear(),a=n(t.getMonth()+1),l=n(t.getDate()),r=n(t.getHours()),s=n(t.getMinutes());return"".concat(i,"-").concat(a,"-").concat(l,"T").concat(r,":").concat(s)}function a(e){if(!e)return null;let[t,n]=e.split("T"),i=5===n.length?"".concat(n,":00"):n;return new Date("".concat(t,"T").concat(i,"+07:00")).toISOString()}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...e].sort((e,t)=>{var n,i;return(null!==(n=e.order)&&void 0!==n?n:0)-(null!==(i=t.order)&&void 0!==i?i:0)})}n.d(t,{HN:function(){return l},Iu:function(){return a},Nl:function(){return i}})}},function(e){e.O(0,[428,293,286,744],function(){return e(e.s=1886)}),_N_E=e.O()}]);